<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>ASCII</title>
<style>
body{margin:0;background:black;color:white;font-family:monospace}
input{position:fixed;top:10px;left:10px;z-index:10}
pre{white-space:pre;font-size:6px;line-height:6px}
</style>
</head>
<body>

<input type="file" accept="image/*">
<pre id="ascii"></pre>
<canvas id="c" style="display:none"></canvas>

<script>
const chars="@#W$9876543210?!abc;:+=-,._ "
const scale=0.15

const input=document.querySelector("input")
const pre=document.getElementById("ascii")
const canvas=document.getElementById("c")
const ctx=canvas.getContext("2d")

input.onchange=()=>{
  const file=input.files[0]
  if(!file)return
  const img=new Image()
  img.src=URL.createObjectURL(file)
  img.onload=()=>draw(img)
}

function draw(img){
  canvas.width=img.width*scale
  canvas.height=img.height*scale
  ctx.drawImage(img,0,0,canvas.width,canvas.height)
  const d=ctx.getImageData(0,0,canvas.width,canvas.height).data
  let o=""
  for(let y=0;y<canvas.height;y++){
    for(let x=0;x<canvas.width;x++){
      const i=(y*canvas.width+x)*4
      const v=(d[i]+d[i+1]+d[i+2])/3
      o+=chars[(v/255*(chars.length-1))|0]
    }
    o+="\n"
  }
  pre.textContent=o
}
</script>

</body>
</html>